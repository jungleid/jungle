{{ define "main" }}
  {{ $slug := .Params.slug }}
  {{ $roadmap := index site.Data.roadmaps $slug }}
  <h2>{{ $roadmap.title }}</h2>

  {{ range $node := $roadmap.nodes }}
    <div class="roadmap-node" id="{{ $node.id }}">
      <strong>{{ .title }}</strong>
    </div>

    {{ if .next }}
        {{ if eq (len .next) 1 }}
            <div class="roadmap-connection">↓</div>
        {{ else }}
            <div class="branch-connector">⇣</div>
            <div class="branch-wrapper">
            {{ $nextNodes := where $roadmap.nodes "id" . }}
            {{ with index $nextNodes 0 }}
            <div class="roadmap-node" id="{{ .id }}">
                <strong>{{ .title }}</strong>
            </div>
            {{ end }}

            </div>
        {{ end }}
    {{ end }}

  {{ end }}
{{ end }}
